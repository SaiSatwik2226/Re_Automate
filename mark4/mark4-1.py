#pushed the data into keyboard

from sensordroid import Client
import time
from pynput.keyboard import Key, Controller


def devicesDiscoveredEventHandler(devices):
    print(devices)
    if len(devices) > 0:
        client = Client(devices[0])

        client.connectionUpdated = connectionUpdatedEventHandler
        #to get transition for the change in mobile state
        time.sleep(1)
        client.sensorsReceived = sensorsReceivedEventHandler
        #client.imageReceived = cameraReceivedEventHandler

        client.sensorsSampleRate = 100
        #client.cameraResolution = 13

        client.connect()


def connectionUpdatedEventHandler(sender, msg):
    if sender is not None:
        if sender.connected:
            print("Connected")
        else:
              print("Disonnected")

k = 0
def sensorsReceivedEventHandler(sender, dataCurrent):
    value = (dataCurrent.Acceleration.Values.AsString.split(','+'\t'))
    for i, j in enumerate(value):
        value[i] = float(j)
    print(value)
    key = Controller()

    if value[1] <= -1.5:
        key.press(Key .down)
        key.release(Key.down)
        print('down')
    elif value[1] >= 1.5:
        key.press(Key.up)
        key.release(Key.up)
        #print('up')
        print('up')
    elif value[0] >= 3.5:#3.5
        key.press(Key.left)
        key.release(Key.left)
        print('left')
    elif value[0] <= -2.5:
        key.press(Key.right)
        key.release(Key.right)
        print('right')
    elif my_request == 'exit':
            sys.exit()

    
    ''' if value[0] <= 0.5 and value[0] >= 0 and value[1] <= -1 and value[1] >= -1.5:
        key.press(' ')
        key.release(' ')  '''


def cameraReceivedEventHandler(sender, image):
    #Process image data bytes
    pass


Client.devicesDiscovered = devicesDiscoveredEventHandler
Client.startDiscovery()

key = input("Press ENTER to exit\n")

Client.closeAll()


''' 
simulated
Press ENTER to exit
['192.168.43.56']
[-0.47633362, -0.58361816, 9.908813]
[-0.15550232, -0.63868713, 9.944733]
[-0.38294983, -0.19096375, 9.779526]
[-0.69898987, -0.65304565, 9.592789]
[-0.6056061, -0.38967896, 9.777145]
[-0.39492798, -0.5572815, 9.896851]
[-0.07888794, -0.7703552, 10.732422]
[-0.557724, -0.9714813, 10.205704]
[0.3209381, -0.4232025, 10.083603]
[-0.61997986, -0.2939148, 9.777145]
[-0.07170105, -0.49742126, 9.724472]
[-0.03819275, -0.51179504, 9.784317]
[-0.27999878, -0.6793823, 9.877701]
Connected
[-0.0070648193, -0.5141754, 9.743622]
[-0.08847046, -0.5931854, 9.992615]
[-0.23930359, -0.62431335, 9.827423]
[-0.24169922, -0.71769714, 9.978256]
[-0.10043335, -0.73924255, 9.712494]
[-0.32070923, -0.80148315, 9.894455]
[-0.260849, -0.77275085, 9.906418]
[-0.27520752, -0.77275085, 9.925583]
[-0.27043152, -0.78952026, 9.896851]
[-0.32548523, -0.80867004, 9.975861]
[-0.40449524, -0.7775421, 9.880081]
[-0.2895813, -0.7703552, 9.834595]
[-0.3805542, -0.7823334, 9.860931]
[-0.18663025, -0.8062744, 9.863327]
[0.7303467, -1.0768127, 10.68454]
[1.2858124, -0.75120544, 9.980652]
[2.877945, 0.024505615, 10.3302]
[2.379959, 0.079574585, 9.271957]
[1.1828613, -0.57403564, 9.746017]
[1.2403107, -0.9547119, 10.088379]
[-0.93362427, -1.0648499, 9.803467]
[-0.5744934, -1.0528717, 9.566452]
[-0.49069214, -1.0241547, 10.047684]
[-0.34225464, -1.105545, 9.834595]
[-0.34942627, -1.0624542, 9.7699585]
[-0.3685913, -1.0049896, 11.668564]
[3.272995, -0.4806671, 11.034088]
[4.249832, -0.18617249, 9.305481]
left
[-0.6511078, -1.0313263, 9.913605]
[-0.56970215, -1.105545, 9.875305]
[-0.70617676, -1.0385132, 9.734039]
[-0.8139038, -1.081604, 9.846573]
[-0.64871216, -1.0457001, 9.923187]
[-0.6151886, -1.0121765, 9.916]
[-0.502655, -1.0768127, 9.753189]
[-0.84742737, -1.1151276, 9.9279785]
[-0.51223755, -0.9690857, 9.942337]
[-0.6558838, -1.105545, 9.772354]
[-0.77560425, -1.0480957, 9.906418]
[-0.7420807, -0.9595032, 9.865723]
[-0.73968506, -1.0744324, 9.896851]
[-0.64152527, -1.0361176, 9.85614]
[-0.5074463, -1.0097809, 9.930374]
[-0.48590088, -1.100769, 10.375687]
[1.9681549, -0.4806671, 8.9655]
[3.6153717, -0.064071655, 10.006989]
left
[1.609024, -0.7751465, 9.963882]
[-1.1514893, -0.6219177, 9.468292]
[-1.3717499, -0.5572815, 10.263168]
[-1.438797, -0.88049316, 9.834595]
[-1.1610718, -1.0193634, 10.10994]
[-1.0748749, -0.87809753, 9.815445]
[-1.2520447, -0.84936523, 9.810654]
[3.1484985, -0.26997375, 9.408432]
[0.54600525, -0.9403534, 9.798691]
[-0.47633362, -1.4215851, 9.662216]
[-0.85461426, -1.5436859, 10.346954]
down
[-1.1275482, -1.3569489, 9.750809]
[-0.7348938, -1.2084961, 9.851364]
[-0.715744, -1.1271057, 9.779526]
[-0.71813965, -1.2228699, 9.992615]
[-0.5864563, -1.1630096, 10.088379]
[-0.63194275, -1.1510468, 9.887268]
[-0.30393982, -1.0768127, 9.762772]
[-0.54096985, -1.2204742, 10.097961]
[-0.24169922, -1.184555, 9.765167]
[0.06715393, -1.1654053, 9.700531]
[0.2778473, -1.3234253, 9.85376]
[0.33770752, -1.3521576, 9.93515]
[1.3983307, -1.3401794, 8.778763]
[2.7725983, -1.2683563, 9.169006]
[5.379898, -1.0911865, 9.118729]
left
[2.6313477, -1.2635651, 10.164993]
[1.7335205, -1.2204742, 9.410828]
[0.46220398, -1.4359436, 9.449127]
[-0.41168213, -1.318634, 9.595184]
[-0.28479004, -1.3234253, 9.549683]
[-0.07170105, -1.3425751, 9.877701]
[0.7806244, -1.5101776, 9.918396]
down
[2.9976654, -0.7488098, 9.554474]
[3.7733765, -0.4519348, 8.941559]
left
[3.9840698, -0.60995483, 9.195343]
left
[3.0766754, -1.2851105, 10.272736]
[2.205185, -1.2492065, 9.916]
[1.0248413, -1.5005951, 10.052475]
down
[0.328125, -1.4503174, 9.839386]
[0.40953064, -1.4120026, 10.258377]
[0.39038086, -1.3952484, 10.021347]
[-1.1802216, -1.5269318, 9.647858]
down
[-1.225708, -1.4120026, 9.662216]
[-1.2759857, -1.4167938, 9.846573]
[-1.4699249, -1.4431305, 9.726852]
[-1.577652, -1.488617, 9.77475]
[-1.4794922, -1.3138428, 9.779526]
[-1.5202026, -1.3784943, 9.863327]
[-1.1179657, -1.4646759, 9.949524]
[-0.8977051, -1.507782, 9.992615]
down
[1.4869232, -1.2922974, 9.377304]
[3.9601288, -0.085617065, 9.762772]
left
[3.3711548, -0.5429077, 8.623138]
[1.0775146, -1.3353882, 10.732422]
[-1.4483795, -1.0887909, 9.614334]
[-1.7285004, -1.6849518, 10.006989]
down
[-0.07649231, -1.615509, 9.5568695]
down
[3.6871948, -0.34658813, 8.982269]
left
[1.9729462, -1.2132874, 10.303864]
[1.5635376, -1.1271057, 9.973465]
[-0.76841736, -1.4551086, 9.6358795]
[-0.6630707, -1.452713, 10.083603]
[2.9354095, -0.5979767, 5.776428]
[4.529953, 0.067611694, 8.5513]
left
[2.8875275, -1.2300415, 9.188171]
[2.6385345, -1.670578, 9.420395]
down
[1.371994, -1.3641205, 12.212036]
[3.2610168, -1.428772, 5.3550415]
[5.3894653, 0.36209106, 9.525742]
left
[-0.770813, -0.41362, 9.501801]
[-1.2304993, -0.7129059, 9.604752]
[-0.30633545, -0.8038788, 10.15303]
[-1.8003235, -0.49263, 9.475464]
[-1.6231537, -0.918808, 9.901642]
[-2.1163483, -0.9403534, 9.93515]
[-1.8170776, -0.88768005, 10.011765]
[1.0487823, -0.43518066, 6.956772]
[1.6233826, -0.080825806, 9.3414]
[0.45741272, -0.1454773, 9.923187]
[-1.5752716, -1.3665161, 9.975861]
[-3.5313263, -1.0672455, 9.6358795]
right
[-3.7061005, -1.2970886, 9.508987]
right
[-3.4834442, -1.1701965, 9.283936]
right
[-3.2990875, -1.1678009, 9.576019]
right
[-3.1338959, -1.1414642, 9.384491]
right
[-2.9543304, -1.0696411, 9.410828]
right
[-1.9583435, -0.9882355, 10.284714]
[-0.9551697, -0.74401855, 9.875305]
[-0.9551697, -0.74401855, 9.875305]
[-2.7627869, -0.8757019, 9.559265]
right
[-2.6622314, -1.0001984, 9.966278]
right
[-3.5073853, -1.270752, 10.392441]
right
[-3.2200775, -0.5093994, 8.711716]
right
[0.4478302, 1.3389282, 9.269562]
[1.2642517, 0.3572998, 9.585602]
[0.68725586, -0.2939148, 10.15303]
[0.9362488, -0.38967896, 10.069229]
[3.0862427, -0.41841125, 8.632706]
[4.1277313, 0.33335876, 9.523346]
left
[-1.4316101, -0.8852844, 9.128311]
[-2.1163483, -0.91641235, 9.726852]
[-2.130722, -1.0528717, 10.018951]
[-0.45716858, -1.507782, 10.856918]
down
[1.3672028, 0.26153564, 8.678192]
[2.2458801, 0.8337555, 8.666229]
[-0.0070648193, -0.24124146, 9.571243]
[-1.9224243, -1.3832703, 10.164993]
[-3.3661346, -1.2922974, 9.097183]
right
[-3.174591, -1.3808899, 9.587997]
right
[-1.948761, -1.6035461, 8.826645]
down
[-1.8362274, -1.5987549, 8.742844]
down
[0.5843048, -0.7464142, 9.851364]
[-0.4595642, -1.8908539, 10.054871]
down
[-1.043747, -1.7855072, 10.021347]
down
[1.6736603, -1.160614, 6.1762543]
[2.435028, -1.476654, 9.2599945]
[2.0280151, -1.883667, 9.6909485]
down
[1.0080719, -2.0919647, 10.797073]
down
[-0.24647522, -1.8573303, 9.870514]
down
[2.0280151, -1.4311676, 11.077194]
[3.7063446, 0.67333984, 7.8569946]
left
[4.098999, 0.7284088, 7.5529175]
left
[2.446991, -0.8469696, 10.006989]
[0.95062256, -2.362503, 10.117111]
down
[0.85006714, -1.4263763, 10.107544]
[0.3496704, -2.7120667, 9.7699585]
down
[0.5076904, -2.7192383, 10.114716]
down
[2.2937622, -1.7400208, 8.943954]
down
[1.5731049, -1.9219666, 11.283096]
down
[1.3145294, -1.9171906, 11.685318]
down
[-0.3685913, -1.8788757, 9.001419]
down
[-0.05973816, -1.3449707, 10.4379425]
[-0.09803772, -1.3162384, 9.798691]
[-0.09803772, -1.3162384, 9.798691]
[0.04081726, -1.3904572, 9.930374]
[0.02166748, -1.2276611, 9.971069]
[-0.1411438, -1.239624, 9.959091]
[0.2993927, -1.373703, 9.87291]
[0.21321106, -1.4910126, 9.870514]
[-0.35421753, -1.100769, 9.939941]
[0.10307312, -1.2204742, 9.904037]
[0.10307312, -1.2970886, 9.923187]
[0.036026, -1.4383392, 9.851364]
[0.012084961, -1.3760986, 9.880081]
[-0.23930359, -1.5388947, 9.863327]
down
[0.0599823, -1.646637, 9.925583]
down
[-0.0070648193, -1.4000397, 9.923187]
[-0.07170105, -1.4120026, 9.870514] '''